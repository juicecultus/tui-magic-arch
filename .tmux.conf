# ══════════════════════════════════════════════
#  tmux config — MacBook 12" 2017 Matrix Theme
# ══════════════════════════════════════════════

# --- General ---
set -g default-terminal "screen-256color"
set -g history-limit 10000
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g mouse on
set -g escape-time 0
set -g repeat-time 300
set -g display-time 2000
set -g status-interval 5
set -g focus-events on

# --- Prefix: Ctrl-a ---
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# --- Pane splitting ---
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# --- Pane navigation (vim-style) ---
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# --- Pane resizing ---
bind -r H resize-pane -L 3
bind -r J resize-pane -D 3
bind -r K resize-pane -U 3
bind -r L resize-pane -R 3

# --- Quick shortcuts (Ctrl-a then key) ---
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Eye candy
bind m new-window -n "matrix" "cmatrix -ab -u 4 -C green"
bind T new-window -n "clock" "tty-clock -scC 2"
bind B new-window -n "bonsai" "cbonsai -li"

# System
bind b new-window -n "monitor" "btop"
bind g new-window -n "disk" "gdu"

# Files
bind n new-window -n "files" "ranger"
bind N new-window -n "nnn" "nnn -deH"

# Git
bind t new-window -n "git" "tig"

# Network
bind i new-window -n "net" "sudo iftop -i wlan0"
bind w new-window -n "wifi" "nmtui"

# Media
bind v new-window -n "vis" "cava"
bind M new-window -n "music" "cmus"

# Productivity
bind c new-window -n "cal" "calcurse"
bind R new-window -n "rss" "newsboat"
bind W new-window -n "web" "w3m https://lite.duckduckgo.com"

# Dashboard (split layout)
bind D run-shell "~/.tmux/dashboard.sh"

# Quick help (H for Help — ? conflicts with tmux built-in)
unbind /
bind H new-window -n "help" "cat ~/.tmux/cheatsheet.txt | less"

# ══════════════════════════════════════════════
#  Theme: Matrix Green on Black
# ══════════════════════════════════════════════

# --- Pane borders ---
set -g pane-border-style "fg=#1a3a1a"
set -g pane-active-border-style "fg=#00ff41"

# --- Message styling ---
set -g message-style "fg=#00ff41,bg=#0a0a0a,bold"
set -g message-command-style "fg=#00ff41,bg=#0a0a0a"

# --- Status bar ---
set -g status-position bottom
set -g status-style "fg=#00ff41,bg=#0a0a0a"
set -g status-justify centre

# Left: session + host
set -g status-left-length 40
set -g status-left "#[fg=#0a0a0a,bg=#00ff41,bold] #S #[fg=#00ff41,bg=#0d2b0d] #h #[fg=#0d2b0d,bg=#0a0a0a] "

# Right: HW controls, Network, CPU, RAM, Battery, Clock
set -g status-right-length 140
set -g status-interval 2
set -g status-right "#[fg=#0d2b0d,bg=#0a0a0a]#[fg=#00ff41,bg=#0d2b0d] #(~/.tmux/hw.sh) #[fg=#1a3a1a,bg=#0d2b0d]|#[fg=#00ff41] #(~/.tmux/net.sh) #[fg=#1a3a1a]|#[fg=#00ff41] #(~/.tmux/cpu.sh) #[fg=#1a3a1a]|#[fg=#00ff41] #(~/.tmux/mem.sh) #[fg=#1a3a1a]|#[fg=#00ff41] #(~/.tmux/bat.sh) #[fg=#00ff41,bg=#0d2b0d] #[fg=#0a0a0a,bg=#00ff41,bold] %H:%M "

# Window tabs
setw -g window-status-format "#[fg=#3a5a3a,bg=#0a0a0a] #I:#W "
setw -g window-status-current-format "#[fg=#0a0a0a,bg=#00872b,bold] #I:#W #[fg=#00872b,bg=#0a0a0a]"
setw -g window-status-separator ""

# Activity
setw -g monitor-activity on
set -g visual-activity off
setw -g window-status-activity-style "fg=#ffff00,bg=#0a0a0a"

# --- Matrix screensaver (idle lock) ---
set -g lock-command "cmatrix -ab -u 4 -C green"
set -g lock-after-time 300
